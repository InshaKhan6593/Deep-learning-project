schema: '2.0'
stages:
  data_ingestion:
    cmd: python ./src/data/data_ingestion.py
    deps:
    - path: ./src/data/data_ingestion.py
      hash: md5
      md5: 597834a6bf7f7128b2f287fa73de1547
      size: 3611
  extract_features:
    cmd: python ./src/features/extract_features.py
    deps:
    - path: ./src/features/extract_features.py
      hash: md5
      md5: 983ee4990527bb38e5b9c52b758a4a86
      size: 4870
    params:
      params.yaml:
        extract_features.ewma.alpha: 0.4
        extract_features.mini_batch_kmeans.n_clusters: 30
        extract_features.mini_batch_kmeans.n_init: 10
        extract_features.mini_batch_kmeans.random_state: 42
    outs:
    - path: ./data/processed/resampled_data.csv
      hash: md5
      md5: ed4bab758479a078084a25b4a6d7dd47
      size: 8480304
    - path: ./models/mb_kmeans.joblib
      hash: md5
      md5: 9f39796656f25aa0d0734724cb2aa111
      size: 143771
    - path: ./models/scaler.joblib
      hash: md5
      md5: f4821d98fd527b1d9d9daf03d9d64e27
      size: 951
  feature_processing:
    cmd: python ./src/features/feature_processing.py
    deps:
    - path: ./data/processed/resampled_data.csv
      hash: md5
      md5: ed4bab758479a078084a25b4a6d7dd47
      size: 8480304
    - path: ./src/features/feature_processing.py
      hash: md5
      md5: 31c165c77eead670ee986455b4ab8374
      size: 2541
    outs:
    - path: ./data/processed/test.csv
      hash: md5
      md5: f9d3b002943690c52e80812bc0dcd644
      size: 49080227
    - path: ./data/processed/train.csv
      hash: md5
      md5: e0a7b71ed71da9af8bb496d3a4c13f12
      size: 92749020
  train:
    cmd: python ./src/models/train.py
    deps:
    - path: ./data/processed/train.csv
      hash: md5
      md5: e0a7b71ed71da9af8bb496d3a4c13f12
      size: 92749020
    - path: ./src/models/train.py
      hash: md5
      md5: c5355346ecd44035c8d68c4becce7617
      size: 7186
    params:
      params.yaml:
        train.batch_size: 64
        train.epochs: 100
        train.learning_rate: 0.00010880878298250268
        train.model_name: GRU
        train.units: 128
    outs:
    - path: models/encoder.joblib
      hash: md5
      md5: cd47bef82af77c5c736c8ef59751abb0
      size: 5870
    - path: models/model.keras
      hash: md5
      md5: e415d25043d94ebe289f336e1182b94d
      size: 1721415
    - path: models/model_metadata.json
      hash: md5
      md5: aa159e1e8a6acef58a39abf9006c0698
      size: 295
    - path: models/training_history.json
      hash: md5
      md5: e905bdb160714e9b31eff4f3abd789f1
      size: 9100
  evaluate:
    cmd: python ./src/models/evaluate.py
    deps:
    - path: ./data/processed/test.csv
      hash: md5
      md5: f9d3b002943690c52e80812bc0dcd644
      size: 49080227
    - path: ./data/processed/train.csv
      hash: md5
      md5: e0a7b71ed71da9af8bb496d3a4c13f12
      size: 92749020
    - path: ./models/encoder.joblib
      hash: md5
      md5: cd47bef82af77c5c736c8ef59751abb0
      size: 5870
    - path: ./models/model.keras
      hash: md5
      md5: e415d25043d94ebe289f336e1182b94d
      size: 1721415
    - path: ./src/models/evaluate.py
      hash: md5
      md5: b9c1907b8d23625bc7b40d42a1930723
      size: 6561
    outs:
    - path: ./run_information.json
      hash: md5
      md5: ce0c98f1e03a5ff8f03f4618c8381949
      size: 151
  register_model:
    cmd: python ./src/models/register_model.py
    deps:
    - path: ./run_information.json
      hash: md5
      md5: ce0c98f1e03a5ff8f03f4618c8381949
      size: 151
    - path: ./src/models/register_model.py
      hash: md5
      md5: 6910fecd06010faf77f371eb4a34e130
      size: 4696
